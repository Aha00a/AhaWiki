@import play.api.cache.CacheApi
@import play.api.db.Database
@import play.api.Configuration
@import logics.ApplicationConf
@(title: String, description: String)(head: Html)(body: Html)(implicit request:Request[Any], cacheApi: CacheApi, database:Database, configuration: Configuration)
<!DOCTYPE html>

<html lang="en">
    <head>
        <title>@title - @request.host</title>

        <meta itemprop="name" content="@(title)">
        <meta property="og:title" content="@(title)" />
        <meta name="twitter:title" content="@(title)">

        <meta name="description" content="@(description)" />
        <meta itemprop="description" content="@(description)">
        <meta property="og:description" content="@(description)" />
        <meta name="twitter:description" content="@(description)">

        <link rel="shortcut icon" type="image/png" href="@routes.Assets.versioned("favicon.png")">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.css" integrity="sha256-46qynGAkLSFpVbEBog43gvNhfrOj+BmwXdxFgVK/Kvc=" crossorigin="anonymous" />
        <link rel="stylesheet" href="@routes.Assets.versioned("less.css")">

        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js" integrity="sha256-rsPUGdUPBXgalvIj4YKJrrUlmLXbOb6Cp7cdxn1qeUc=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.14.0/jquery.validate.min.js" integrity="sha256-Lj47JmDL+qxf6/elCzHQSUFZmJYmqEECssN5LP/ifRM=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.form/3.51/jquery.form.min.js" integrity="sha256-jkaBMXLp+mraE29Q0r6gtTniSfPhS1N0R7YcQwdt7nQ=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.devbridge-autocomplete/1.2.24/jquery.autocomplete.min.js" integrity="sha256-PsW8RLr/0Hdq8VSZyHHLFxO6t3ltKo3L3ULL1xByhhc=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>

        <script type="text/x-mathjax-config">
            MathJax.Hub.Config({
                tex2jax: {
                    inlineMath: [['$___$','$___$']],
                    processClass: "mathjax",
                    ignoreClass: "no-mathjax"
                }
            });
        </script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js" integrity="sha256-yYfngbEKv4RENfGDvNUqJTqGFcKf31NJEe9OTnnMH3Y=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/config/TeX-AMS_HTML.js" integrity="sha256-MZuxbOGocfrefUyrW6qNzjtj51TdsXJybGQ5F5fjS7A=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.30.5/js/jquery.tablesorter.min.js" integrity="sha256-hwBdweUyYRh66ChQYK+o9bSD1fyYShd6oQVwZ6iq7Ww=" crossorigin="anonymous"></script>
        <script type="text/javascript" src="/public/js/jquery.hotkeys.js"></script>@*TODO: apply cdn*@
        <script src="https://cdnjs.cloudflare.com/ajax/libs/vivagraphjs/0.12.0/vivagraph.min.js" integrity="sha256-kKQdUhGEwWzNj3itlPXnaVunrFXAnCsNbFXLKKUcago=" crossorigin="anonymous"></script>
        @if(ApplicationConf().AhaWiki.google.credentials.api.MapsJavaScriptAPI.key()) {
            <script type="text/javascript">
                var arrayOnGoogleMapLoaded = [];
                function onGoogleMapLoaded() {
                    for (var i = 0; i < arrayOnGoogleMapLoaded.length; i++) {
                        arrayOnGoogleMapLoaded[i]();
                    }
                }
            </script>
        }
        @if(ApplicationConf().AhaWiki.google.AdSense.adClient()) {
            <script data-ad-client="@(ApplicationConf().AhaWiki.google.AdSense.adClient())" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        }
        @if(ApplicationConf().AhaWiki.google.reCAPTCHA.siteKey() && ApplicationConf().AhaWiki.google.reCAPTCHA.siteKey()) {
            <script src="https://www.google.com/recaptcha/api.js?render=@(ApplicationConf().AhaWiki.google.reCAPTCHA.siteKey())"></script>
            <script>
                function getReCaptcha() {
                    grecaptcha.ready(function() {
                        grecaptcha.execute('@(ApplicationConf().AhaWiki.google.reCAPTCHA.siteKey())', {action: 'homepage'}).then(function(token) {
                            var element = document.getElementById('recaptcha');
                            if(element)
                                element.value = token;
                        });
                    });
                }
                setInterval(getReCaptcha, 60 * 1000);
                getReCaptcha();
            </script>
        }


        @head
    </head>
    <body class="AhaWiki no-mathjax">
        @body
        @if(ApplicationConf().AhaWiki.google.credentials.api.MapsJavaScriptAPI.key()) {
            <script async defer src="https://maps.googleapis.com/maps/api/js?key=@(ApplicationConf().AhaWiki.google.credentials.api.MapsJavaScriptAPI.key())&callback=onGoogleMapLoaded"></script>
        }
        @_googleAnalytics()
    </body>
</html>
